import{a as b,$ as a,b as M,s as z,g as C,i as $,c as E,e as I}from"./main-DHM1wb5-.js";import"./vendor-B2AETYxa.js";let e=[],f=C("wiClockFormat")||"24",r=1;const _=9;let d=[...b.europa],v=null;const A=o=>{const[t,i,n]=o.split(":").map(Number),s=t>=12?"PM":"AM";return`${(t%12||12).toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")} ${s}`},P=o=>{if(!v)return"";const[t,i]=v.split(":").map(Number),[n,s]=o.split(":").map(Number),c=t*60+i;let l=n*60+s-c;l>720&&(l-=1440),l<-720&&(l+=1440);const w=Math.floor(Math.abs(l)/60),h=Math.abs(l)%60;return l===0&&h===0?'<span class="wicont_diff misma-hora">Misma hora</span>':l>0?`<span class="wicont_diff adelantado">Adelantado ${h>0?`+${w}h ${h}m`:`+${w}h`}</span>`:`<span class="wicont_diff atrasado">Atrasado ${h>0?`-${w}h ${h}m`:`-${w}h`}</span>`},g=(o,t)=>{try{const i=$(o.zona);if(!i)return;o.ciudad==="Lima"&&(v=i.hora);const n=f==="12"?A(i.hora):i.hora,s=I(i.hora),c=P(i.hora),p=s?"DÃ­a":"Noche";t.find(".wicont_time").text(n),t.find(".wicont_fecha").text(i.fecha),t.find(".wicont_gmt").text(i.gmt),t.find(".wicont_estado").text(p),t.find(".wicont_diferencia").html(c),t.find(".wicont_icon i").attr("class",`fas ${s?"fa-sun":"fa-moon"}`)}catch(i){console.error("Error actualizando reloj:",i)}},x=()=>{const o=$("America/Lima");o&&(v=o.hora)},u=()=>{const o=(r-1)*_,t=o+_,i=d.slice(o,t);return i.length===0?'<div class="wicont_empty"><i class="fas fa-search"></i><p>No se encontraron ciudades</p></div>':i.map(n=>`
    <div class="wicont_card" data-zona="${n.zona}">
      <div class="wicont_card_header">
        <img src="${E(n.codigo)}" alt="${n.pais}" class="wicont_flag" />
        <div class="wicont_location">
          <h3 class="wicont_ciudad">${n.ciudad}</h3>
          <p class="wicont_pais">${n.pais}</p>
        </div>
        <div class="wicont_icon"><i class="fas fa-sun"></i></div>
      </div>
      <div class="wicont_time">00:00:00</div>
      <div class="wicont_fecha">Cargando...</div>
      <div class="wicont_info">
        <div class="wicont_info_item"><i class="fas fa-exchange-alt"></i><span class="wicont_diferencia"></span></div>
        <div class="wicont_info_item"><i class="fas fa-globe"></i><span class="wicont_gmt">GMT+00:00</span></div>
        <div class="wicont_info_item"><i class="fas fa-clock"></i><span class="wicont_estado">DÃ­a</span></div>
      </div>
    </div>
  `).join("")},m=()=>{const o=Math.ceil(d.length/_);if(o<=1)return"";let t="";const i=5;let n=Math.max(1,r-Math.floor(i/2)),s=Math.min(o,n+i-1);s-n<i-1&&(n=Math.max(1,s-i+1));for(let c=n;c<=s;c++)t+=`<button class="wipag_btn ${c===r?"active":""}" data-pagina="${c}">${c}</button>`;return`<div class="wipaginacion"><button class="wipag_btn wipag_prev" ${r===1?"disabled":""}><i class="fas fa-chevron-left"></i> Anterior</button><div class="wipag_numeros">${t}</div><button class="wipag_btn wipag_next" ${r===o?"disabled":""}>Siguiente <i class="fas fa-chevron-right"></i></button></div>`},G=async()=>(x(),`<div class="wicontinente"><div class="wicont_header"><h1 class="wicont_title">ðŸ‡ªðŸ‡º Europa</h1><p class="wicont_subtitle">Explora las zonas horarias del viejo continente</p><div class="wicont_controls"><div class="wicont_search"><i class="fas fa-search wicont_search_icon"></i><input type="text" id="searchEuropa" placeholder="Buscar ciudad o paÃ­s..." class="wisearch_input" /><span class="wicont_count">${d.length} ciudades</span></div><div class="wibtn_group"><button class="wibtn wibtn_format ${f==="24"?"active":""}" data-format="24"><i class="fas fa-clock"></i> 24h</button><button class="wibtn wibtn_format ${f==="12"?"active":""}" data-format="12"><i class="far fa-clock"></i> 12h</button></div></div></div><div class="wicont_grid" id="europaGrid">${u()}</div><div class="wicont_footer">${m()}</div></div>`),L=()=>{e.forEach(clearInterval),e=[],x();const o=()=>{a(".wicont_card").each((t,i)=>{const n=a(i),s=d.find(c=>c.zona===n.data("zona"));s&&(g(s,n),e.push(setInterval(()=>g(s,n),1e3)))})};o(),a("#searchEuropa").on("input",function(){const t=a(this).val().trim();d=t?M(t,"europa"):[...b.europa],r=1,e.forEach(clearInterval),e=[],a("#europaGrid").html(u()),a(".wicont_count").text(`${d.length} ciudades`),a(".wicont_footer").html(m()),o()}),a(".wibtn_format").on("click",function(){const t=a(this).data("format");f!==t&&(f=t,a(".wibtn_format").removeClass("active"),a(this).addClass("active"),z("wiClockFormat",f,720),a(".wicont_card").each((i,n)=>{const s=a(n);s.find(".wicont_time").addClass("changing"),setTimeout(()=>s.find(".wicont_time").removeClass("changing"),400);const c=d.find(p=>p.zona===s.data("zona"));c&&g(c,s)}))}),a(document).on("click",".wipag_btn:not(.wipag_prev):not(.wipag_next)",function(){a(this).hasClass("active")||(r=parseInt(a(this).data("pagina")),e.forEach(clearInterval),e=[],a("#europaGrid").html(u()),a(".wicont_footer").html(m()),o(),a(".wicont_grid").get(0).scrollIntoView({behavior:"smooth",block:"start"}))}),a(document).on("click",".wipag_prev",()=>{r>1&&(r--,e.forEach(clearInterval),e=[],a("#europaGrid").html(u()),a(".wicont_footer").html(m()),o(),a(".wicont_grid").get(0).scrollIntoView({behavior:"smooth",block:"start"}))}),a(document).on("click",".wipag_next",()=>{const t=Math.ceil(d.length/_);r<t&&(r++,e.forEach(clearInterval),e=[],a("#europaGrid").html(u()),a(".wicont_footer").html(m()),o(),a(".wicont_grid").get(0).scrollIntoView({behavior:"smooth",block:"start"}))}),console.log("ðŸ‡ªðŸ‡º MÃ³dulo de Europa inicializado")},N=()=>{e.forEach(clearInterval),e=[]};export{N as cleanup,L as init,G as render};
