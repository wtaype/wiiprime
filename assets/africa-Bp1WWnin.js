import{$ as a}from"./main-wdEaf4-Z.js";import{d as b,e as M,s as A,i as $,f as z,g as C,h as I}from"./widev-aZ5GBlZ2.js";import"./vendor-B2AETYxa.js";let e=[],f=C("wiClockFormat")||"24",r=1;const _=9;let d=[...b.africa],v=null;const E=o=>{const[i,t,n]=o.split(":").map(Number),c=i>=12?"PM":"AM";return`${(i%12||12).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")} ${c}`},P=o=>{if(!v)return"";const[i,t]=v.split(":").map(Number),[n,c]=o.split(":").map(Number),s=i*60+t;let l=n*60+c-s;l>720&&(l-=1440),l<-720&&(l+=1440);const p=Math.floor(Math.abs(l)/60),h=Math.abs(l)%60;return l===0&&h===0?'<span class="wicont_diff misma-hora">Misma hora</span>':l>0?`<span class="wicont_diff adelantado">Adelantado ${h>0?`+${p}h ${h}m`:`+${p}h`}</span>`:`<span class="wicont_diff atrasado">Atrasado ${h>0?`-${p}h ${h}m`:`-${p}h`}</span>`},g=(o,i)=>{try{const t=$(o.zona);if(!t)return;o.ciudad==="Lima"&&(v=t.hora);const n=f==="12"?E(t.hora):t.hora,c=I(t.hora),s=P(t.hora),w=c?"D√≠a":"Noche";i.find(".wicont_time").text(n),i.find(".wicont_fecha").text(t.fecha),i.find(".wicont_gmt").text(t.gmt),i.find(".wicont_estado").text(w),i.find(".wicont_diferencia").html(s),i.find(".wicont_icon i").attr("class",`fas ${c?"fa-sun":"fa-moon"}`)}catch(t){console.error("Error actualizando reloj:",t)}},x=()=>{const o=$("America/Lima");o&&(v=o.hora)},m=()=>{const o=(r-1)*_,i=o+_,t=d.slice(o,i);return t.length===0?'<div class="wicont_empty"><i class="fas fa-search"></i><p>No se encontraron ciudades</p></div>':t.map(n=>`
    <div class="wicont_card" data-zona="${n.zona}">
      <div class="wicont_card_header">
        <img src="${z(n.codigo)}" alt="${n.pais}" class="wicont_flag" />
        <div class="wicont_location">
          <h3 class="wicont_ciudad">${n.ciudad}</h3>
          <p class="wicont_pais">${n.pais}</p>
        </div>
        <div class="wicont_icon"><i class="fas fa-sun"></i></div>
      </div>
      <div class="wicont_time">00:00:00</div>
      <div class="wicont_fecha">Cargando...</div>
      <div class="wicont_info">
        <div class="wicont_info_item"><i class="fas fa-exchange-alt"></i><span class="wicont_diferencia"></span></div>
        <div class="wicont_info_item"><i class="fas fa-globe"></i><span class="wicont_gmt">GMT+00:00</span></div>
        <div class="wicont_info_item"><i class="fas fa-clock"></i><span class="wicont_estado">D√≠a</span></div>
      </div>
    </div>
  `).join("")},u=()=>{const o=Math.ceil(d.length/_);if(o<=1)return"";let i="";const t=5;let n=Math.max(1,r-Math.floor(t/2)),c=Math.min(o,n+t-1);c-n<t-1&&(n=Math.max(1,c-t+1));for(let s=n;s<=c;s++)i+=`<button class="wipag_btn ${s===r?"active":""}" data-pagina="${s}">${s}</button>`;return`<div class="wipaginacion"><button class="wipag_btn wipag_prev" ${r===1?"disabled":""}><i class="fas fa-chevron-left"></i> Anterior</button><div class="wipag_numeros">${i}</div><button class="wipag_btn wipag_next" ${r===o?"disabled":""}>Siguiente <i class="fas fa-chevron-right"></i></button></div>`},L=async()=>(x(),`<div class="wicontinente"><div class="wicont_header"><h1 class="wicont_title">üåç √Åfrica</h1><p class="wicont_subtitle">Explora las zonas horarias de la cuna de la humanidad</p><div class="wicont_controls"><div class="wicont_search"><i class="fas fa-search wicont_search_icon"></i><input type="text" id="searchAfrica" placeholder="Buscar ciudad o pa√≠s..." class="wisearch_input" /><span class="wicont_count">${d.length} ciudades</span></div><div class="wibtn_group"><button class="wibtn wibtn_format ${f==="24"?"active":""}" data-format="24"><i class="fas fa-clock"></i> 24h</button><button class="wibtn wibtn_format ${f==="12"?"active":""}" data-format="12"><i class="far fa-clock"></i> 12h</button></div></div></div><div class="wicont_grid" id="africaGrid">${m()}</div><div class="wicont_footer">${u()}</div></div>`),N=()=>{e.forEach(clearInterval),e=[],x();const o=()=>{a(".wicont_card").each((i,t)=>{const n=a(t),c=d.find(s=>s.zona===n.data("zona"));c&&(g(c,n),e.push(setInterval(()=>g(c,n),1e3)))})};o(),a("#searchAfrica").on("input",function(){const i=a(this).val().trim();d=i?M(i,"africa"):[...b.africa],r=1,e.forEach(clearInterval),e=[],a("#africaGrid").html(m()),a(".wicont_count").text(`${d.length} ciudades`),a(".wicont_footer").html(u()),o()}),a(".wibtn_format").on("click",function(){const i=a(this).data("format");f!==i&&(f=i,a(".wibtn_format").removeClass("active"),a(this).addClass("active"),A("wiClockFormat",f,720),a(".wicont_card").each((t,n)=>{const c=a(n);c.find(".wicont_time").addClass("changing"),setTimeout(()=>c.find(".wicont_time").removeClass("changing"),400);const s=d.find(w=>w.zona===c.data("zona"));s&&g(s,c)}))}),a(document).on("click",".wipag_btn:not(.wipag_prev):not(.wipag_next)",function(){a(this).hasClass("active")||(r=parseInt(a(this).data("pagina")),e.forEach(clearInterval),e=[],a("#africaGrid").html(m()),a(".wicont_footer").html(u()),o(),a(".wicont_grid").get(0).scrollIntoView({behavior:"smooth",block:"start"}))}),a(document).on("click",".wipag_prev",()=>{r>1&&(r--,e.forEach(clearInterval),e=[],a("#africaGrid").html(m()),a(".wicont_footer").html(u()),o(),a(".wicont_grid").get(0).scrollIntoView({behavior:"smooth",block:"start"}))}),a(document).on("click",".wipag_next",()=>{const i=Math.ceil(d.length/_);r<i&&(r++,e.forEach(clearInterval),e=[],a("#africaGrid").html(m()),a(".wicont_footer").html(u()),o(),a(".wicont_grid").get(0).scrollIntoView({behavior:"smooth",block:"start"}))}),console.log("üåç M√≥dulo de √Åfrica inicializado")},T=()=>{e.forEach(clearInterval),e=[]};export{T as cleanup,N as init,L as render};
